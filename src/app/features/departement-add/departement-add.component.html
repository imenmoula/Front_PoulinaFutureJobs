<div class="container">
  <!-- Success Message -->
  

  <!-- Error Messages -->
  <div class="alert alert-danger alert-block" *ngIf="errorMessages.length > 0">
    <strong>Une erreur s'est produite :</strong>
    <ul>
      <li *ngFor="let error of errorMessages">{{ error }}</li>
    </ul>
  </div>

  <div class="row justify-content-center">
    <div class="col-sm-8">
      <div class="card mt-3 p-3">
        <h1 class="text-muted">Ajouter un Département</h1>
        <div class="alert alert-success alert-block" *ngIf="successMessage">
          <strong>{{ successMessage }}</strong>
        </div>
        <form [formGroup]="departementForm" (ngSubmit)="onSubmit()">
          <div class="form-group">
            <label>Nom* :</label>
            <input
              type="text"
              class="form-control"
              formControlName="nom"
              [class.is-invalid]="departementForm.get('nom')?.invalid && departementForm.get('nom')?.touched"
            >
            <span class="text-danger" *ngIf="departementForm.get('nom')?.hasError('required') && departementForm.get('nom')?.touched">
              Le nom est requis
            </span>
          </div>

          <div class="form-group">
            <label>Description* :</label>
            <textarea
              class="form-control"
              rows="4"
              formControlName="description"
              [class.is-invalid]="departementForm.get('description')?.invalid && departementForm.get('description')?.touched"
            ></textarea>
            <span class="text-danger" *ngIf="departementForm.get('description')?.hasError('required') && departementForm.get('description')?.touched">
              La description est requise
            </span>
          </div>

          <div class="form-group">
            <label>Filiale* :</label>
            <select
              class="form-control"
              formControlName="idFiliale"
              [class.is-invalid]="departementForm.get('idFiliale')?.invalid && departementForm.get('idFiliale')?.touched"
            >
              <option value="">Sélectionner une filiale</option>
              <option *ngFor="let filiale of filiales" [value]="filiale.idFiliale">
                {{ filiale.nom }}
              </option>
            </select>
            <span class="text-danger" *ngIf="departementForm.get('idFiliale')?.hasError('required') && departementForm.get('idFiliale')?.touched">
              La filiale est requise
            </span>
          </div>

          <button type="submit" class="btn btn-primary" [disabled]="departementForm.invalid">Envoyer</button>
          <button type="button" class="btn btn-secondary ml-2" (click)="cancel()">Retour</button>
        </form>
      </div>
    </div>
  </div>
</div>