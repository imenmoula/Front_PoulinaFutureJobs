<div class="login-main">
  <form class="theme-form" [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
    <h4>Réinitialiser votre mot de passe</h4>
    <p>Entrez votre nouveau mot de passe ci-dessous.</p>

    @if (successMessage) {
      <div class="alert alert-success">{{ successMessage }}</div>
    }
    @if (errorMessage) {
      <div class="alert alert-danger">{{ errorMessage }}</div>
    }

    <div class="form-group">
      <label class="col-form-label">Nouveau mot de passe</label>
      <input class="form-control" type="password" formControlName="password">
      @if (resetPasswordForm.get('password')?.touched && resetPasswordForm.get('password')?.hasError('required')) {
        <small class="text-danger">Le mot de passe est requis.</small>
      }
      @if (resetPasswordForm.get('password')?.touched && resetPasswordForm.get('password')?.hasError('minlength')) {
        <small class="text-danger">Le mot de passe doit contenir au moins 8 caractères.</small>
      }
    </div>

    <div class="form-group">
      <label class="col-form-label">Confirmer le mot de passe</label>
      <input class="form-control" type="password" formControlName="confirmPassword">
      @if (resetPasswordForm.get('confirmPassword')?.touched && resetPasswordForm.get('confirmPassword')?.hasError('required')) {
        <small class="text-danger">La confirmation du mot de passe est requise.</small>
      }
      @if (resetPasswordForm.hasError('mismatch') && resetPasswordForm.get('confirmPassword')?.touched) {
        <small class="text-danger">Les mots de passe ne correspondent pas.</small>
      }
    </div>

    <div class="form-group mb-0">
      <button class="btn btn-primary btn-block w-100 mt-3" type="submit" [disabled]="!resetPasswordForm.valid || loading">
        {{ loading ? 'Envoi en cours...' : 'Réinitialiser le mot de passe' }}
      </button>
    </div>
  </form>
</div>