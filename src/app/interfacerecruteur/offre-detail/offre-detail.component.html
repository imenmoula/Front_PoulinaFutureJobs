
<div class="page-wrapper compact-wrapper" id="pageWrapper">
  <app-header (toggleSidebarEvent)="toggleSidebar()"></app-header>

  <br><br><br>

  <div class="page-body-wrapper">
    <app-sidebar [sidebarOpen]="sidebarOpen"></app-sidebar>
    <div class="page-body">
<div class="container my-4" *ngIf="offreDetails; else loading">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-primary">üìù D√©tails de l'Offre</h2>
    
  </div>

  <!-- D√©tails de l'offre -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <div class="row gy-3">
        <div class="col-md-6">
          <p><i class="bi bi-briefcase text-primary"></i> <strong>Titre :</strong> {{ offreDetails.titre || 'Non sp√©cifi√©' }}</p>
        </div>
        <div class="col-md-6">
          <p><i class="bi bi-tags text-secondary"></i> <strong>Sp√©cialit√© :</strong> {{ offreDetails.specialite || 'Non sp√©cifi√©' }}</p>
        </div>
        <div class="col-12">
          <p><i class="bi bi-file-text text-info"></i> <strong>Description :</strong> {{ offreDetails.description || 'Aucune description' }}</p>
        </div>
        <div class="col-md-6">
          <p><i class="bi bi-mortarboard text-warning"></i> <strong>Dipl√¥me requis :</strong> {{ offreDetails.diplomeRequis || 'Non sp√©cifi√©' }}</p>
        </div>
        <div class="col-md-6">
          <p><i class="bi bi-star text-success"></i> <strong>Niveau d'exp√©rience :</strong> {{ offreDetails.niveauExperienceRequis || 'Non sp√©cifi√©' }}</p>
        </div>
        <div class="col-md-6">
          <p><i class="bi bi-currency-dollar text-danger"></i> <strong>Salaire :</strong> {{ offreDetails.salaire !== undefined ? offreDetails.salaire + ' TND' : 'Non sp√©cifi√©' }}</p>
        </div>
        <div class="col-md-6">
          <p><i class="bi bi-calendar text-muted"></i> <strong>Date de publication :</strong> {{ offreDetails.datePublication || 'Non sp√©cifi√©' }}</p>
        </div>
        <div class="col-md-6">
          <p><i class="bi bi-calendar text-muted"></i> <strong>Date d'expiration :</strong> {{ offreDetails.dateExpiration  || 'Non sp√©cifi√©' }}</p>
        </div>
        <div class="col-md-6">
          <p><i class="bi bi-file-earmark-text text-primary"></i> <strong>Type de contrat :</strong> {{ getTypeContratLabel(offreDetails.typeContrat) }}</p>
        </div>
        <div class="col-md-6">
          <p><i class="bi bi-check-circle text-success"></i> <strong>Statut :</strong> {{ getStatutLabel(offreDetails.statut) }}</p>
        </div>
        <div class="col-md-6">
          <p><i class="bi bi-building text-secondary"></i> <strong>Mode de travail :</strong> {{ getModeTravailLabel(offreDetails.modeTravail) }}</p>
        </div>
        <div class="col-md-6">
          <p><i class="bi bi-people text-warning"></i> <strong>Nombre de postes :</strong> {{ offreDetails.nombrePostes || 'Non sp√©cifi√©' }}</p>
        </div>
        <div class="col-12">
          <p><i class="bi bi-gift text-info"></i> <strong>Avantages :</strong> {{ offreDetails.avantages || 'Aucun avantage' }}</p>
        </div>
        <div class="col-md-6">
          <p><strong>Filiale :</strong> {{ getFilialeName(offreDetails.idFiliale) }}</p>
        </div>
        <div class="col-md-6">
          <p><strong>Adresse :</strong> {{ getFilialeAdresse(offreDetails.idFiliale) }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Comp√©tences requises -->
  <div class="card shadow-sm mb-4">
    <div class="card-header bg-light">
      <h4 class="mb-0"><i class="bi bi-stars text-dark"></i> Comp√©tences Requises</h4>
    </div>
    <div class="card-body">
      <ul class="list-group list-group-flush" *ngIf="offreDetails.offreCompetences?.length; else noCompetences">
        <li *ngFor="let comp of offreDetails.offreCompetences" class="list-group-item">
          <p><i class="bi bi-star-fill text-primary"></i> <strong>Nom :</strong> {{ comp.competence?.nom || 'Non sp√©cifi√©' }}</p>
          <p><i class="bi bi-info-circle text-secondary"></i> <strong>Description :</strong> {{ comp.competence?.description || 'Non sp√©cifi√©e' }}</p>
          <p><i class="bi bi-check text-success"></i> <strong>Niveau requis :</strong> {{ comp.niveauRequis || 'Non sp√©cifi√©' }}</p>
          <p><i class="bi bi-code text-info"></i> <strong>Hard Skills :</strong> {{ comp.competence?.hardSkills?.join(', ') || 'Aucun' }}</p>
          <p><i class="bi bi-heart text-danger"></i> <strong>Soft Skills :</strong> {{ comp.competence?.softSkills?.join(', ') || 'Aucun' }}</p>
        </li>
      </ul>
      
      <ng-template #noCompetences>
        <p class="text-muted">Aucune comp√©tence associ√©e √† cette offre.</p>
      </ng-template>
    </div>
    <div class="flex justify-center mt-10">
      <button 
        (click)="goBack()" 
        class="bg-gradient-to-r from-blue-500 to-indigo-600 text-white py-3 px-6 rounded-full shadow-md hover:shadow-xl hover:scale-105 transition-all duration-300"
      >
        ‚¨ÖÔ∏è Retour √† la liste des offres
      </button>
    </div>
  </div>
  
</div>


<ng-template #loading>
  <div class="text-center mt-5">
    <div class="spinner-border text-primary" role="status"></div>
    <p class="mt-3">Chargement des d√©tails de l'offre...</p>
  </div>
</ng-template>
</div>
<app-footer></app-footer>
</div>
</div>